@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --color-sidebar: hsl(var(--sidebar));

  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  --font-sans: 'Inter', sans-serif;
  --font-heading: 'Plus Jakarta Sans', sans-serif;

  --radius: 0.75rem;

  /* Accordion animations for shadcn/ui */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }

    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }

    to {
      height: 0;
    }
  }
}

:root {
  /* ============================================
     UNIFIED NEUMORPHIC DESIGN TOKENS
     Light source: top-left for consistent tactile feel
     ============================================ */

  /* Base surface colors - uniform across sidebar and main area */
  --neu-bg: #e8ecf2;
  /* Background canvas - soft cool gray */
  --neu-surface: #eef2f6;
  /* Raised surfaces - slightly lighter */
  --neu-surface-alt: #f4f7fb;
  /* Alternative surface for cards */

  /* Shadow colors - avoid pure black for soft skeuo feel */
  --neu-shadow-dark: rgba(20, 30, 45, 0.14);
  --neu-shadow-light: rgba(255, 255, 255, 0.85);
  --neu-shadow-dark-strong: rgba(20, 30, 45, 0.18);
  --neu-shadow-light-strong: rgba(255, 255, 255, 0.92);

  /* Stroke for subtle edge definition */
  --neu-stroke: rgba(255, 255, 255, 0.55);
  --neu-stroke-inner: rgba(20, 30, 45, 0.05);

  /* Unified shadow tokens - consistent light direction (top-left) */
  --neu-raised-1:
    -6px -6px 12px var(--neu-shadow-light),
    6px 6px 12px var(--neu-shadow-dark);

  --neu-raised-2:
    -10px -10px 22px var(--neu-shadow-light-strong),
    12px 12px 26px var(--neu-shadow-dark-strong);

  --neu-inset-1:
    inset 4px 4px 10px var(--neu-shadow-dark),
    inset -4px -4px 10px var(--neu-shadow-light);

  --neu-inset-subtle:
    inset 2px 2px 6px rgba(20, 30, 45, 0.08),
    inset -2px -2px 6px var(--neu-shadow-light);

  /* Legacy HSL values for compatibility */
  --neu-base: 220 15% 92%;
  --neu-light: 0 0% 100%;
  --neu-dark: 220 10% 82%;

  /* Sidebar - same surface as main for unified feel */
  --sidebar: 220 15% 91%;

  /* Background - cool gray base (matches neu-bg) */
  --background: 220 15% 91%;
  --foreground: 220 20% 15%;

  /* Cards/panels - slightly elevated from background */
  --card: 220 15% 94%;
  --card-foreground: 220 20% 15%;

  --popover: 220 15% 96%;
  --popover-foreground: 220 20% 15%;

  /* Primary - muted blue */
  --primary: 220 60% 50%;
  --primary-foreground: 0 0% 100%;

  /* Secondary - for debossed elements */
  --secondary: 220 15% 88%;
  --secondary-foreground: 220 20% 25%;

  --muted: 220 15% 88%;
  --muted-foreground: 220 10% 45%;

  --accent: 220 15% 90%;
  --accent-foreground: 220 20% 15%;

  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  --border: 220 15% 85%;
  --input: 220 15% 88%;
  --ring: 220 60% 50%;

  --radius: 0.75rem;

  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;
}

/* Prevent layout shifts with scrollbar */
html {
  scrollbar-gutter: stable;
}

html:has(body[data-scroll-locked]) {
  overflow-y: scroll;
}

/* Webkit overlay scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

.dark {
  /* Dark mode neumorphic tokens */
  --neu-bg: #1a1d23;
  --neu-surface: #22262e;
  --neu-surface-alt: #282c36;

  --neu-shadow-dark: rgba(0, 0, 0, 0.45);
  --neu-shadow-light: rgba(60, 70, 85, 0.12);
  --neu-shadow-dark-strong: rgba(0, 0, 0, 0.55);
  --neu-shadow-light-strong: rgba(70, 80, 100, 0.15);

  --neu-stroke: rgba(255, 255, 255, 0.06);
  --neu-stroke-inner: rgba(0, 0, 0, 0.2);

  --neu-raised-1:
    -6px -6px 12px var(--neu-shadow-light),
    6px 6px 12px var(--neu-shadow-dark);

  --neu-raised-2:
    -10px -10px 22px var(--neu-shadow-light-strong),
    12px 12px 26px var(--neu-shadow-dark-strong);

  --neu-inset-1:
    inset 4px 4px 10px var(--neu-shadow-dark),
    inset -4px -4px 10px var(--neu-shadow-light);

  --neu-inset-subtle:
    inset 2px 2px 6px rgba(0, 0, 0, 0.25),
    inset -2px -2px 6px var(--neu-shadow-light);

  /* Legacy HSL values */
  --neu-base: 220 6% 18%;
  --neu-light: 220 6% 24%;
  --neu-dark: 220 6% 10%;

  --sidebar: 220 6% 14%;

  --background: 220 6% 16%;
  --foreground: 0 0% 92%;

  --card: 220 6% 20%;
  --card-foreground: 0 0% 92%;

  --popover: 220 6% 18%;
  --popover-foreground: 0 0% 92%;

  --primary: 0 0% 95%;
  --primary-foreground: 0 0% 10%;

  --secondary: 220 6% 14%;
  --secondary-foreground: 0 0% 85%;

  --muted: 220 6% 16%;
  --muted-foreground: 0 0% 55%;

  --accent: 220 6% 22%;
  --accent-foreground: 0 0% 92%;

  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;

  --border: 220 6% 12%;
  --input: 220 6% 14%;
  --ring: 0 0% 40%;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased text-foreground;
    background: var(--neu-bg);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-heading font-semibold tracking-tight;
  }

  /* Enhanced Typography Hierarchy */
  .transcript-title {
    @apply text-2xl font-bold tracking-tight;
  }

  .transcript-content {
    @apply text-lg leading-relaxed text-foreground/90;
  }
}

/* ============================================
   UNIFIED NEUMORPHISM CLASSES
   All using consistent top-left light source
   ============================================ */

/* Raised panel with paired shadow (top-left highlight, bottom-right shadow) */
.neu-panel-raised {
  background: var(--neu-surface);
  box-shadow: var(--neu-raised-1);
  border: 1px solid var(--neu-stroke);
  border-radius: 18px;
  position: relative;
}

/* Inner bevel highlight for more tactile feel */
.neu-panel-raised::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.55),
    inset 0 -1px 0 rgba(20, 30, 45, 0.03);
}

/* Inset/debossed panel for wells, inputs, status areas */
.neu-panel-inset {
  background: var(--neu-bg);
  box-shadow: var(--neu-inset-1);
  border: 1px solid rgba(255, 255, 255, 0.25);
  border-radius: 18px;
}

/* Search field / input inset */
.neu-search-inset {
  background: linear-gradient(145deg,
      hsl(220 15% 86% / 0.8),
      hsl(220 15% 90% / 0.9));
  box-shadow: var(--neu-inset-1);
  border: 1px solid rgba(255, 255, 255, 0.35);
  border-radius: 18px;
}

/* Nav item base */
.neu-nav-item {
  background: transparent;
  border-radius: 14px;
  transition: background 0.1s ease-out, transform 0.1s ease-out;
}

.neu-nav-item:active {
  transform: scale(0.97);
  transition: none;
}

/* Active nav item - raised from surface */
.neu-nav-active {
  background: var(--neu-surface-alt);
  box-shadow: var(--neu-raised-1);
  border: 1px solid var(--neu-stroke);
  border-radius: 14px;
  position: relative;
}

.neu-nav-active::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    inset 0 -1px 0 rgba(20, 30, 45, 0.02);
}

/* Keyboard shortcut badge */
.neu-kbd {
  background: var(--neu-surface);
  box-shadow:
    -2px -2px 4px var(--neu-shadow-light),
    2px 2px 4px var(--neu-shadow-dark);
  border: 1px solid var(--neu-stroke);
}

/* ============================================
   RECORDINGS LIST - UNIFIED WELL + ROWS STYLE
   ============================================ */

/* Container well for transcript list */
.neu-recordings-well {
  background: var(--neu-bg);
  border-radius: 22px;
  padding: 14px;
  box-shadow: var(--neu-inset-1);
  border: 1px solid rgba(255, 255, 255, 0.25);
}

/* Individual recording row - raised from well */
.neu-recording-row {
  background: var(--neu-surface);
  border-radius: 20px;
  box-shadow: var(--neu-raised-1);
  border: 1px solid var(--neu-stroke);
  position: relative;
  transition: transform 0.12s ease-out, box-shadow 0.12s ease-out;
}

.neu-recording-row::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    inset 0 -1px 0 rgba(20, 30, 45, 0.02);
}

.neu-recording-row+.neu-recording-row {
  margin-top: 12px;
}

.neu-recording-row:hover {
  box-shadow: var(--neu-raised-2);
  transform: translateY(-1px);
}

/* Scroll performance: skip offscreen card content */
@supports (content-visibility: auto) {
  .perf-scroll-item {
    content-visibility: auto;
    contain: layout paint;
    contain-intrinsic-size: 120px;
  }

  .perf-scroll-grid {
    contain: layout;
    contain-intrinsic-size: 200px;
  }
}

/* ============================================
   STATUS WELL / BANNER - DEBOSSED STYLE
   ============================================ */

.neu-status-well {
  background: var(--neu-bg);
  border-radius: 22px;
  box-shadow: var(--neu-inset-1);
  border: 1px solid rgba(255, 255, 255, 0.35);
  position: relative;
}

/* Optional screen effect for status wells */
.neu-status-well::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(180deg,
      rgba(255, 255, 255, 0.03) 0%,
      transparent 50%,
      rgba(0, 0, 0, 0.02) 100%);
}

/* ============================================
   MIC BUTTON - FIXED TACTILE STYLE
   Same light direction as sidebar (top-left)
   ============================================ */

.neu-mic-button {
  width: 96px;
  height: 96px;
  border-radius: 999px;
  background: linear-gradient(145deg, #3a73e8, #2f63dd);
  box-shadow:
    -10px -10px 20px rgba(255, 255, 255, 0.35),
    12px 12px 26px rgba(20, 30, 45, 0.22);
  border: 1px solid rgba(255, 255, 255, 0.25);
  position: relative;
  transition: all 0.15s ease-out;
}

/* Inner highlight ring for button */
.neu-mic-button::after {
  content: "";
  position: absolute;
  inset: 8px;
  border-radius: inherit;
  pointer-events: none;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.22);
}

.neu-mic-button:hover {
  transform: translateY(-2px);
  box-shadow:
    -12px -12px 24px rgba(255, 255, 255, 0.4),
    14px 14px 30px rgba(20, 30, 45, 0.25);
}

.neu-mic-button:active {
  transform: translateY(1px);
  box-shadow:
    inset 8px 8px 16px rgba(20, 30, 45, 0.22),
    inset -8px -8px 16px rgba(255, 255, 255, 0.25);
}

/* Recording state - red gradient */
.neu-mic-button.recording {
  background: linear-gradient(145deg, #ef4444, #dc2626);
}

/* Dark mode overrides */
.dark .neu-panel-raised {
  background: var(--neu-surface);
  box-shadow: var(--neu-raised-1);
  border: 1px solid var(--neu-stroke);
}

.dark .neu-panel-raised::before {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.04),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
}

.dark .neu-panel-inset {
  background: var(--neu-bg);
  box-shadow: var(--neu-inset-1);
  border: 1px solid rgba(255, 255, 255, 0.04);
}

.dark .neu-search-inset {
  background: linear-gradient(145deg,
      hsl(220 6% 13% / 0.9),
      hsl(220 6% 16% / 0.9));
  box-shadow: var(--neu-inset-1);
  border: 1px solid rgba(255, 255, 255, 0.04);
}

.dark .neu-nav-active {
  background: var(--neu-surface-alt);
  box-shadow: var(--neu-raised-1);
  border: 1px solid var(--neu-stroke);
}

.dark .neu-nav-active::before {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.03),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

.dark .neu-kbd {
  background: var(--neu-surface);
  box-shadow:
    -2px -2px 4px var(--neu-shadow-light),
    2px 2px 4px var(--neu-shadow-dark);
  border: 1px solid var(--neu-stroke);
}

.dark .neu-recordings-well {
  background: var(--neu-bg);
  box-shadow: var(--neu-inset-1);
  border: 1px solid rgba(255, 255, 255, 0.03);
}

.dark .neu-recording-row {
  background: var(--neu-surface);
  box-shadow: var(--neu-raised-1);
  border: 1px solid var(--neu-stroke);
}

.dark .neu-recording-row::before {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.03),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

.dark .neu-status-well {
  background: var(--neu-bg);
  box-shadow: var(--neu-inset-1);
  border: 1px solid rgba(255, 255, 255, 0.03);
}

.dark .neu-mic-button {
  box-shadow:
    -10px -10px 20px rgba(70, 80, 100, 0.12),
    12px 12px 26px rgba(0, 0, 0, 0.45);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.dark .neu-mic-button::after {
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);
}

.dark .neu-mic-button:hover {
  box-shadow:
    -12px -12px 24px rgba(70, 80, 100, 0.15),
    14px 14px 30px rgba(0, 0, 0, 0.5);
}

/* ============================================
   GLOSSY NEO MIC BUTTON
   ============================================ */

.glossy-mic-wrapper {
  --audio-gain: 0;
  --mic-bg-base: #f4f6f9;
  --mic-trench-bg: #e9eef5;
  --mic-trench-edge: rgba(255, 255, 255, 0.62);
  --mic-shadow-light: #ffffff;
  --mic-shadow-dark: #d0d7e2;
  --mic-outer-shadow-dark: rgba(200, 207, 220, 0.55);
  --mic-outer-shadow-light: rgba(255, 255, 255, 0.9);
  --mic-center-shadow-dark: rgba(194, 202, 216, 0.72);
  --mic-center-shadow-light: rgba(255, 255, 255, 0.96);
  --mic-center-outline-light: rgba(255, 255, 255, 0.45);
  --mic-center-outline-dark: rgba(168, 178, 194, 0.2);
  --mic-idle-top: #fcfeff;
  --mic-idle-bottom: #dfe6f0;
  --mic-idle-inset-light: rgba(255, 255, 255, 1);
  --mic-idle-inset-dark: rgba(190, 199, 214, 0.52);
  --mic-icon-idle: #a5acb8;
  --mic-red-highlight: #ff6b76;
  --mic-red-main: #fb2636;
  --mic-red-dark: #bd0d19;
  --mic-red-glow: rgba(251, 38, 54, 0.45);
  --outer-size: 148px;
  --trench-size: 118px;
  --button-size: 92px;
  --icon-size: 34px;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
}

.glossy-mic-outer-ring {
  width: var(--outer-size);
  height: var(--outer-size);
  border-radius: 999px;
  background: var(--mic-bg-base);
  box-shadow:
    12px 12px 24px var(--mic-outer-shadow-dark),
    -10px -10px 22px var(--mic-outer-shadow-light);
  display: flex;
  align-items: center;
  justify-content: center;
}

.glossy-mic-trench {
  width: var(--trench-size);
  height: var(--trench-size);
  border-radius: 999px;
  background: var(--mic-trench-bg);
  box-shadow:
    inset 7px 7px 14px var(--mic-shadow-dark),
    inset -7px -7px 14px var(--mic-shadow-light),
    0 0 0 1px var(--mic-trench-edge);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.glossy-mic-pulse-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: var(--button-size);
  height: var(--button-size);
  border-radius: 999px;
  background: var(--mic-red-main);
  transform: translate(-50%, -50%) scale(1);
  opacity: 0;
  transition: opacity 0.5s ease, transform 0.5s ease, box-shadow 0.5s ease;
  pointer-events: none;
  z-index: 1;
}

.glossy-mic-wrapper.is-recording .glossy-mic-pulse-glow {
  opacity: calc(0.5 + var(--audio-gain) * 0.5);
  transform: translate(-50%, -50%) scale(calc(1 + var(--audio-gain) * 0.35));
  box-shadow: 0 0 calc(30px + var(--audio-gain) * 80px) calc(10px + var(--audio-gain) * 30px) var(--mic-red-glow);
}

.glossy-mic-ripple-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: var(--button-size);
  height: var(--button-size);
  border-radius: 999px;
  pointer-events: none;
  z-index: 2;
}

.glossy-mic-ripple {
  --scale-target: 1.6;
  --ripple-alpha: 0.45;
  position: absolute;
  inset: 0;
  border-radius: 999px;
  border: 2px solid rgba(255, 107, 118, var(--ripple-alpha));
  box-shadow:
    0 0 20px rgba(251, 38, 54, calc(var(--ripple-alpha) * 0.8)),
    inset 0 0 15px rgba(251, 38, 54, calc(var(--ripple-alpha) * 0.5));
  animation: glossyMicRipple 1.2s cubic-bezier(0.2, 0.8, 0.3, 1) forwards;
}

@keyframes glossyMicRipple {
  0% {
    transform: scale(0.95);
    opacity: 1;
    border-width: 3px;
  }

  100% {
    transform: scale(var(--scale-target));
    opacity: 0;
    border-width: 0;
  }
}

.glossy-mic-central-button {
  width: var(--button-size);
  height: var(--button-size);
  border-radius: 999px;
  border: none;
  outline: none;
  background: transparent;
  box-shadow:
    9px 9px 20px var(--mic-center-shadow-dark),
    -9px -9px 18px var(--mic-center-shadow-light),
    inset 0 1px 1px var(--mic-center-outline-light),
    inset 0 -2px 4px var(--mic-center-outline-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  cursor: pointer;
  transition: transform 0.45s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.45s cubic-bezier(0.2, 0.8, 0.2, 1);
  z-index: 10;
}

.glossy-mic-wrapper:not(.is-recording) .glossy-mic-central-button:hover {
  transform: scale(1.02);
  box-shadow:
    10px 10px 22px rgba(200, 207, 220, 0.62),
    -10px -10px 20px #ffffff;
}

.glossy-mic-wrapper.is-recording .glossy-mic-central-button {
  transform: scale(calc(0.96 + var(--audio-gain) * 0.07));
  box-shadow:
    0 5px 14px rgba(251, 38, 54, 0.32),
    0 0 10px rgba(251, 38, 54, 0.25);
}

.glossy-mic-layer {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  pointer-events: none;
  transition: opacity 0.45s ease;
}

.glossy-mic-idle-layer {
  background: linear-gradient(135deg, var(--mic-idle-top) 0%, var(--mic-idle-bottom) 100%);
  box-shadow:
    inset 2px 2px 4px var(--mic-idle-inset-light),
    inset -3px -3px 8px var(--mic-idle-inset-dark);
  opacity: 1;
}

.glossy-mic-wrapper.is-recording .glossy-mic-idle-layer {
  opacity: 0;
}

.glossy-mic-recording-layer {
  background: radial-gradient(circle at 50% 20%, var(--mic-red-highlight) 0%, var(--mic-red-main) 45%, var(--mic-red-dark) 100%);
  box-shadow:
    inset 0 -10px 20px rgba(100, 0, 0, 0.45),
    inset 0 8px 14px rgba(255, 255, 255, 0.28);
  opacity: 0;
}

.glossy-mic-wrapper.is-recording .glossy-mic-recording-layer {
  opacity: 1;
  filter: brightness(calc(0.86 + var(--audio-gain) * 0.5)) saturate(calc(0.9 + var(--audio-gain) * 0.55));
}

.glossy-mic-flare-layer {
  background: radial-gradient(circle at 50% 30%, rgba(255, 255, 255, 0.88) 0%, transparent 62%);
  opacity: calc(var(--audio-gain) * 1.15);
  mix-blend-mode: overlay;
  z-index: 14;
}

.glossy-mic-gloss-highlight {
  position: absolute;
  top: 4%;
  left: 18%;
  right: 18%;
  height: 34%;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.58) 0%, rgba(255, 255, 255, 0.08) 82%, transparent 100%);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.45s ease;
  z-index: 20;
}

.glossy-mic-wrapper.is-recording .glossy-mic-gloss-highlight {
  opacity: 1;
}

.glossy-mic-icon {
  position: relative;
  z-index: 30;
  width: var(--icon-size);
  height: var(--icon-size);
  color: var(--mic-icon-idle);
  transition: color 0.2s ease, filter 0.2s ease, transform 0.08s linear;
}

.glossy-mic-wrapper.is-recording .glossy-mic-icon {
  color: #ffffff;
  filter: drop-shadow(0 2px 4px rgba(150, 0, 0, 0.4));
  transform: scale(calc(1 + var(--audio-gain) * 0.08));
}

.glossy-mic-status-label {
  margin-top: 16px;
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.24em;
  text-transform: uppercase;
  color: var(--mic-icon-idle);
  transition: color 0.45s ease, text-shadow 0.45s ease;
}

.glossy-mic-wrapper.is-recording .glossy-mic-status-label {
  color: var(--mic-red-main);
  text-shadow: 0 0 10px rgba(251, 38, 54, calc(0.2 + var(--audio-gain) * 0.4));
}

.dark .glossy-mic-wrapper {
  --mic-bg-base: hsl(220 9% 13%);
  --mic-trench-bg: hsl(220 9% 13%);
  --mic-trench-edge: rgba(255, 255, 255, 0.03);
  --mic-shadow-light: rgba(255, 255, 255, 0.05);
  --mic-shadow-dark: rgba(0, 0, 0, 0.55);
  --mic-outer-shadow-dark: rgba(0, 0, 0, 0.4);
  --mic-outer-shadow-light: rgba(255, 255, 255, 0.02);
  --mic-center-shadow-dark: rgba(0, 0, 0, 0.45);
  --mic-center-shadow-light: rgba(255, 255, 255, 0.03);
  --mic-center-outline-light: rgba(255, 255, 255, 0.08);
  --mic-center-outline-dark: rgba(0, 0, 0, 0.45);
  --mic-idle-top: hsl(220 10% 24%);
  --mic-idle-bottom: hsl(220 10% 18%);
  --mic-idle-inset-light: rgba(255, 255, 255, 0.08);
  --mic-idle-inset-dark: rgba(0, 0, 0, 0.55);
  --mic-icon-idle: #9ba5b5;
}

.dark .glossy-mic-central-button {
  box-shadow:
    8px 8px 18px rgba(0, 0, 0, 0.45),
    -8px -8px 16px rgba(255, 255, 255, 0.03);
}

.dark .glossy-mic-wrapper:not(.is-recording) .glossy-mic-central-button:hover {
  box-shadow:
    10px 10px 22px rgba(0, 0, 0, 0.52),
    -10px -10px 20px rgba(255, 255, 255, 0.05);
}

.dark .neu-mic-button:active {
  box-shadow:
    inset 8px 8px 16px rgba(0, 0, 0, 0.35),
    inset -8px -8px 16px rgba(70, 80, 100, 0.1);
}

/* ============================================
   MICRO-INTERACTIONS & TRANSITIONS
   Optimized for snappy feel - 100-120ms durations
   ============================================ */

.neu-panel-raised,
.neu-panel-inset {
  transition: box-shadow 0.12s ease-out, transform 0.1s ease-out;
}

.neu-search-inset {
  transition: box-shadow 0.1s ease-out;
}

/* Hover lift effect */
.neu-panel-raised:hover {
  box-shadow: var(--neu-raised-2);
}

/* Clickable press animation - instant feedback */
.neu-panel-clickable:active {
  transform: translateY(0) scale(0.98);
  box-shadow: var(--neu-inset-subtle);
  transition: none;
}

/* Neumorphic Button */
.neu-button {
  background: var(--neu-surface);
  box-shadow: var(--neu-raised-1);
  border: 1px solid var(--neu-stroke);
  transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
}

.neu-button:hover {
  transform: translateY(-2px);
  box-shadow: var(--neu-raised-2);
}

.neu-button:active {
  transform: scale(0.96);
  box-shadow: var(--neu-inset-subtle);
  transition: none;
}

/* Nav item hover */
.neu-nav-item:hover {
  background: hsl(220 15% 92% / 0.6);
}

.dark .neu-nav-item:hover {
  background: hsl(220 6% 22% / 0.5);
}

/* Focus States */
.neu-panel-raised:focus-visible,
.neu-nav-item:focus-visible,
.neu-button:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}

/* Recording Button Pulse Animation */
@keyframes recPulse {

  0%,
  100% {
    box-shadow:
      -10px -10px 20px rgba(255, 255, 255, 0.35),
      12px 12px 26px rgba(20, 30, 45, 0.22),
      0 0 0 0 rgba(239, 68, 68, 0.5);
  }

  50% {
    box-shadow:
      -10px -10px 20px rgba(255, 255, 255, 0.35),
      12px 12px 26px rgba(20, 30, 45, 0.22),
      0 0 0 16px rgba(239, 68, 68, 0);
  }
}

.recording-pulse {
  animation: recPulse 1.5s ease-in-out infinite;
}

/* ============================================
   MAGIC THEME TOGGLE
   ============================================ */

.magic-theme-toggle {
  --toggle-width: 58px;
  --toggle-height: 30px;
  --toggle-padding: 3px;
  --thumb-size: calc(var(--toggle-height) - (var(--toggle-padding) * 2));
  --slide-distance: calc(var(--toggle-width) - var(--thumb-size) - (var(--toggle-padding) * 2));

  --sky-day: #60a5fa;
  --sky-night: #1e1b4b;
  --sun-color: #fbbf24;
  --moon-color: #e2e8f0;

  width: var(--toggle-width);
  height: var(--toggle-height);
  border: 0;
  border-radius: 999px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  background: var(--sky-day);
  box-shadow:
    inset 0 3px 8px rgba(0, 0, 0, 0.14),
    0 3px 12px rgba(0, 0, 0, 0.1);
  transition: background-color 0.55s cubic-bezier(0.4, 0, 0.2, 1);
}

@media (min-width: 768px) {
  .magic-theme-toggle {
    --toggle-width: 64px;
    --toggle-height: 32px;
  }
}

.magic-theme-toggle:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}

.magic-theme-toggle.is-dark {
  background: var(--sky-night);
}

.magic-theme-toggle__thumb {
  width: var(--thumb-size);
  height: var(--thumb-size);
  border-radius: 50%;
  position: absolute;
  top: var(--toggle-padding);
  left: var(--toggle-padding);
  background: var(--sun-color);
  box-shadow:
    0 4px 10px rgba(0, 0, 0, 0.18),
    inset 0 -3px 8px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 3;
  transition:
    transform 0.55s cubic-bezier(0.68, -0.55, 0.265, 1.55),
    background-color 0.55s ease,
    box-shadow 0.55s ease;
}

.magic-theme-toggle.is-dark .magic-theme-toggle__thumb {
  transform: translateX(var(--slide-distance));
  background: var(--moon-color);
  box-shadow:
    0 4px 14px rgba(255, 255, 255, 0.26),
    inset 0 -3px 8px rgba(0, 0, 0, 0.2);
}

.magic-theme-toggle__sun,
.magic-theme-toggle__moon {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition:
    opacity 0.5s ease,
    transform 0.55s cubic-bezier(0.4, 0, 0.2, 1);
}

.magic-theme-toggle__sun {
  animation: themeToggleSunPulse 4s infinite ease-in-out;
}

.magic-theme-toggle__moon {
  opacity: 0;
  transform: rotate(-90deg) scale(0.45);
}

.magic-theme-toggle.is-dark .magic-theme-toggle__sun {
  opacity: 0;
  transform: rotate(90deg) scale(0.45);
}

.magic-theme-toggle.is-dark .magic-theme-toggle__moon {
  opacity: 1;
  transform: rotate(0deg) scale(1);
}

.magic-theme-toggle__clouds,
.magic-theme-toggle__stars {
  position: absolute;
  inset: 0;
}

.magic-theme-toggle__clouds {
  transition: opacity 0.45s ease, transform 0.55s ease;
}

.magic-theme-toggle__cloud {
  position: absolute;
  fill: #fff;
  opacity: 0.9;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.12));
  animation: themeToggleCloudDrift 18s infinite linear alternate;
}

.magic-theme-toggle__cloud--1 {
  top: 46%;
  left: 10%;
  width: 11px;
  animation-duration: 20s;
}

.magic-theme-toggle__cloud--2 {
  top: 18%;
  left: 45%;
  width: 15px;
  animation-duration: 25s;
}

.magic-theme-toggle__cloud--3 {
  top: 58%;
  left: 63%;
  width: 10px;
  animation-duration: 17s;
}

.magic-theme-toggle.is-dark .magic-theme-toggle__clouds {
  opacity: 0;
  transform: translateY(12px);
}

.magic-theme-toggle__stars {
  opacity: 0;
  transform: translateY(-12px);
  transition:
    opacity 0.55s ease,
    transform 0.55s ease;
}

.magic-theme-toggle__star {
  position: absolute;
  fill: #fff;
  animation: themeToggleTwinkle 3s infinite ease-in-out;
}

.magic-theme-toggle__star--1 {
  top: 20%;
  left: 16%;
  width: 6px;
  animation-delay: 0s;
}

.magic-theme-toggle__star--2 {
  top: 46%;
  left: 32%;
  width: 4px;
  animation-delay: 1s;
}

.magic-theme-toggle__star--3 {
  top: 14%;
  left: 56%;
  width: 7px;
  animation-delay: 0.5s;
}

.magic-theme-toggle__star--4 {
  top: 62%;
  left: 46%;
  width: 5px;
  animation-delay: 1.4s;
}

.magic-theme-toggle__star--5 {
  top: 30%;
  left: 80%;
  width: 7px;
  animation-delay: 0.2s;
}

.magic-theme-toggle__star--6 {
  top: 67%;
  left: 74%;
  width: 4px;
  animation-delay: 1.9s;
}

.magic-theme-toggle.is-dark .magic-theme-toggle__stars {
  opacity: 1;
  transform: translateY(0);
}

.magic-theme-toggle__crater {
  position: absolute;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.14);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

.magic-theme-toggle__crater--1 {
  width: 6px;
  height: 6px;
  top: 6px;
  left: 7px;
}

.magic-theme-toggle__crater--2 {
  width: 3px;
  height: 3px;
  top: 13px;
  left: 16px;
}

.magic-theme-toggle__crater--3 {
  width: 8px;
  height: 8px;
  top: 14px;
  left: 6px;
}

.magic-theme-toggle__crater--4 {
  width: 3px;
  height: 3px;
  top: 7px;
  left: 15px;
}

@keyframes themeToggleTwinkle {
  0%,
  100% {
    opacity: 0.35;
    transform: scale(0.8);
  }

  50% {
    opacity: 1;
    transform: scale(1.15);
  }
}

@keyframes themeToggleCloudDrift {
  0% {
    transform: translateX(0);
  }

  100% {
    transform: translateX(8px);
  }
}

@keyframes themeToggleSunPulse {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.06);
  }
}

/* ============================================
   DELETE ACTION BUTTON
   ============================================ */

.delete-pill,
.copy-pill {
  --action-size: 30px;
  --action-hover-width: 92px;
  --action-icon-size: 12px;
  width: var(--action-size);
  height: var(--action-size);
  border-radius: 999px;
  background-color: var(--neu-surface);
  border: 1px solid var(--neu-stroke);
  color: hsl(var(--muted-foreground));
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    -2px -2px 5px var(--neu-shadow-light),
    2px 2px 7px var(--neu-shadow-dark);
  cursor: pointer;
  overflow: hidden;
  position: relative;
  flex-shrink: 0;
  transition:
    width 0.3s ease,
    border-radius 0.3s ease,
    background-color 0.3s ease,
    box-shadow 0.3s ease,
    transform 0.2s ease-out;
}

.delete-pill--sm,
.copy-pill--sm {
  --action-size: 24px;
  --action-hover-width: 72px;
  --action-icon-size: 10px;
}

.delete-pill__icon,
.delete-pill__spinner,
.copy-pill__icon,
.copy-pill__check {
  width: var(--action-icon-size);
  height: var(--action-icon-size);
  transition-duration: 0.3s;
}

.delete-pill::before,
.copy-pill::before {
  position: absolute;
  top: 50%;
  left: 50%;
  content: attr(data-label);
  color: #fff;
  transition-duration: 0.3s;
  font-size: 2px;
  font-weight: 600;
  line-height: 1;
  opacity: 0;
  pointer-events: none;
  white-space: nowrap;
  transform: translate(-50%, -160%);
}

.delete-pill:hover:not(:disabled),
.copy-pill:hover:not(:disabled) {
  width: var(--action-hover-width);
  border-radius: 50px;
}

.delete-pill:hover:not(:disabled) {
  background-color: rgb(255, 69, 69);
}

.copy-pill:hover:not(:disabled) {
  background-color: rgb(59, 130, 246);
}

.dark .copy-pill:hover:not(:disabled) {
  background-color: rgb(96, 165, 250);
}

.delete-pill:hover:not(:disabled) .delete-pill__icon,
.copy-pill:hover:not(:disabled) .copy-pill__icon {
  width: 22px;
  height: 22px;
  transform: translateY(95%);
}

.delete-pill--sm:hover:not(:disabled) .delete-pill__icon,
.copy-pill--sm:hover:not(:disabled) .copy-pill__icon {
  width: 16px;
  height: 16px;
}

.delete-pill:hover:not(:disabled)::before,
.copy-pill:hover:not(:disabled)::before {
  font-size: 11px;
  opacity: 1;
  transform: translate(-50%, -58%);
}

.delete-pill--sm:hover:not(:disabled)::before,
.copy-pill--sm:hover:not(:disabled)::before {
  font-size: 9px;
  transform: translate(-50%, -60%);
}

.delete-pill:active:not(:disabled),
.copy-pill:active:not(:disabled) {
  transform: scale(0.97);
}

.delete-pill:focus-visible,
.copy-pill:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

.delete-pill:disabled,
.copy-pill:disabled {
  cursor: not-allowed;
  opacity: 0.85;
}

.copy-pill.is-copied {
  background-color: rgb(34, 197, 94);
  box-shadow: 0 0 16px rgba(34, 197, 94, 0.3);
}

.copy-pill.is-copied::before {
  opacity: 0;
  transform: none;
}

.delete-pill:hover:not(:disabled),
.copy-pill:hover:not(:disabled),
.delete-pill.is-loading,
.copy-pill.is-copied {
  color: #fff;
  border-color: transparent;
}

.dark .delete-pill,
.dark .copy-pill {
  background-color: rgb(20, 20, 20);
  border-color: rgba(255, 255, 255, 0.06);
  color: #fff;
  box-shadow: 0 0 14px rgba(0, 0, 0, 0.24);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {

  .neu-panel-raised,
  .neu-search-inset,
  .neu-nav-item,
  .neu-nav-active,
  .neu-button,
  .neu-recording-row,
  .recording-pulse,
  .glossy-mic-wrapper,
  .glossy-mic-wrapper *,
  .magic-theme-toggle,
  .magic-theme-toggle *,
  .delete-pill,
  .delete-pill *,
  .copy-pill,
  .copy-pill * {
    transition: none !important;
    animation: none !important;
  }

  .neu-panel-raised:hover,
  .neu-recording-row:hover {
    transform: none;
  }
}

/* ============================================
   PROSE STYLES FOR MARKDOWN
   ============================================ */

.prose {
  font-size: 1.125rem;
  line-height: 1.75;
}

.prose h1 {
  font-size: 2rem;
  font-weight: 700;
  letter-spacing: -0.025em;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.prose h2 {
  font-size: 1.625rem;
  font-weight: 600;
  letter-spacing: -0.015em;
  margin-top: 1.75rem;
  margin-bottom: 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid hsl(var(--border));
}

.prose h3 {
  font-size: 1.375rem;
  font-weight: 600;
  letter-spacing: -0.01em;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
}

.prose p {
  font-size: 1.125rem;
  line-height: 1.75;
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
}

.prose ul,
.prose ol {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding-left: 1.5rem;
}

.prose ul {
  list-style-type: disc;
}

.prose ol {
  list-style-type: decimal;
}

.prose li {
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
}

.prose strong {
  font-weight: 600;
}

.prose a {
  color: hsl(var(--primary));
  text-decoration: underline;
}

.prose a:hover {
  opacity: 0.8;
}

.prose blockquote {
  border-left: 4px solid hsl(var(--border));
  padding-left: 1rem;
  margin: 1rem 0;
  font-style: italic;
  color: hsl(var(--muted-foreground));
}

.prose code {
  background: hsl(var(--muted));
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
}

.prose pre {
  background: hsl(var(--muted));
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1rem 0;
}

.prose pre code {
  background: transparent;
  padding: 0;
}

.dark .prose h2 {
  border-bottom-color: hsl(var(--border));
}

/* ============================================
   SKELETON LOADER STYLES
   ============================================ */

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }

  100% {
    background-position: -200% 0;
  }
}

.neu-skeleton {
  background: linear-gradient(90deg,
      hsl(220 15% 88%) 25%,
      hsl(220 15% 94%) 50%,
      hsl(220 15% 88%) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 0.5rem;
}

.dark .neu-skeleton {
  background: linear-gradient(90deg,
      hsl(220 6% 16%) 25%,
      hsl(220 6% 22%) 50%,
      hsl(220 6% 16%) 75%);
  background-size: 200% 100%;
}

.neu-skeleton-card {
  background: var(--neu-surface);
  box-shadow: var(--neu-raised-1);
  border: 1px solid var(--neu-stroke);
}

/* ============================================
   NEUMORPHIC TOAST STYLES
   ============================================ */

[data-sonner-toaster] [data-sonner-toast] {
  background: var(--neu-surface) !important;
  border: 1px solid var(--neu-stroke) !important;
  box-shadow: var(--neu-raised-2) !important;
  border-radius: 1rem !important;
}

[data-sonner-toaster] [data-sonner-toast][data-type="success"] {
  background: linear-gradient(135deg, hsl(142 70% 45% / 0.15), var(--neu-surface)) !important;
}

[data-sonner-toaster] [data-sonner-toast][data-type="error"] {
  background: linear-gradient(135deg, hsl(0 70% 50% / 0.15), var(--neu-surface)) !important;
}

/* ============================================
   EMPTY STATE STYLES
   ============================================ */

.empty-state-icon {
  width: 80px;
  height: 80px;
  stroke-width: 1px;
  opacity: 0.4;
}

.empty-state-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem 2rem;
  text-align: center;
  gap: 1rem;
}

.empty-state-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: hsl(var(--foreground));
  margin: 0;
}

.empty-state-description {
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
  max-width: 280px;
  margin: 0;
}
